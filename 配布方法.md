# 在庫管理システム - 配布用実行ファイルの作成方法

## 概要
このガイドでは、在庫管理システムをPythonがインストールされていない環境でも動作する
実行ファイル（.exe）にする方法を説明します。

## 必要なもの
- Python 3.8以上がインストールされた開発環境
- このアプリケーションのソースコード
- インターネット接続（PyInstallerのインストール用）

## ビルド手順

### 方法1: バッチファイルを使用（簡単）

1. `ビルド実行.bat` をダブルクリック
2. 指示に従ってPyInstallerをインストール（初回のみ）
3. ビルドが完了するまで待つ（5-10分程度）
4. `dist` フォルダ内に `在庫管理システム.exe` が作成されます

### 方法2: コマンドラインから実行

```bash
# 1. 必要なパッケージをインストール
pip install -r requirements.txt

# 2. ビルドスクリプトを実行
python build_exe.py
```

## 配布方法

### 単一ファイルとして配布
`dist` フォルダ内の `在庫管理システム.exe` を配布してください。

### 配布パッケージの内容
以下のファイルを含めることを推奨します：
- `在庫管理システム.exe` - メインの実行ファイル
- `README.txt` - 使い方の説明（自動生成されます）

### 配布先での使用方法
1. `在庫管理システム.exe` をダブルクリック
2. 初回起動時にデータベースフォルダを選択
3. ブラウザで http://127.0.0.1:5000 にアクセス

## ビルドオプション

### コンソールウィンドウを非表示にする
`app.spec` ファイルの以下の行を変更：
```python
console=True,  # ← False に変更
```

### アイコンを設定する
1. .ico 形式のアイコンファイルを用意
2. `app.spec` ファイルの以下の行を変更：
```python
icon=None,  # ← 'icon.ico' に変更
```

### ファイルサイズを小さくする
`app.spec` ファイルの `excludes` に不要なモジュールを追加：
```python
excludes=['matplotlib', 'numpy', 'pandas'],
```

## トラブルシューティング

### ビルドが失敗する
- すべての依存パッケージがインストールされているか確認
- `pip install -r requirements.txt` を再実行
- `build` と `dist` フォルダを削除してやり直す

### 実行ファイルが起動しない
- ウイルス対策ソフトが誤検知している可能性があります
- 除外設定を行うか、別のPCで試してください

### 実行ファイルが大きすぎる
- `upx=True` が有効になっているか確認（圧縮が有効）
- 不要なモジュールを `excludes` に追加

### Tkinterエラーが出る
- Pythonインストール時にTkinterを含めたか確認
- Python公式インストーラーで再インストール

## 配布時の注意事項

1. **初回起動時間**
   - 初回起動は展開に時間がかかります（10-30秒程度）
   - 2回目以降は高速に起動します

2. **セキュリティ警告**
   - Windows Defenderが警告を出す場合があります
   - これは署名されていない実行ファイルに対する標準的な警告です

3. **データベースの共有**
   - 複数人で使用する場合は、共有フォルダをデータベースフォルダに指定
   - 各ユーザーが同じフォルダを指定する必要があります

4. **バックアップ**
   - 定期的にバックアップ機能を使用することを推奨
   - データベースフォルダ全体をバックアップするのも有効

## パフォーマンス

### 起動速度
- 初回: 10-30秒
- 2回目以降: 3-5秒

### メモリ使用量
- 約 50-100 MB（データベースサイズによる）

### ファイルサイズ
- 約 30-50 MB（圧縮後）

## ライセンスと配布

このアプリケーションを配布する際は、以下を確認してください：
- 使用しているライブラリのライセンス
- Flask: BSD License
- SQLAlchemy: MIT License
- WTForms: BSD License

## サポート

問題が発生した場合：
1. エラーメッセージをコピー
2. コンソールウィンドウのログを確認
3. データベースファイルへのアクセス権限を確認

## 更新方法

アプリを更新する場合：
1. ソースコードを更新
2. ビルドスクリプトを再実行
3. 新しい .exe を配布

既存ユーザーのデータは保持されます（データベースファイルは変更されません）
