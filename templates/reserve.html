<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if action == 'use' %}使用予約{% else %}補充予約{% endif %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">{{ material.name }} の {% if action == 'use' %}使用予約{% else %}補充予約{% endif %}</h1>
        <form method="POST" class="w-50">
            {{ form.hidden_tag() }}
            <div class="mb-3">
                {{ form.lot_id.label(class="form-label") }}
                {{ form.lot_id(class="form-select") }}
                <small class="form-text text-muted">既存のロットから選択する場合</small>
            </div>
            <div class="mb-3">
                {{ form.lot_name.label(class="form-label") }}
                {{ form.lot_name(class="form-control", placeholder="例: 2026-02-A") }}
                <small class="form-text text-muted">新しいロット名を入力する場合（補充時に新規作成、使用時は既存ロットから検索）</small>
            </div>
            <div class="mb-3">
                {{ form.quantity.label(class="form-label") }}
                {{ form.quantity(class="form-control", step="0.001") }}
                <small class="form-text text-muted">単位: {{ material.unit }}</small>
            </div>
            <div class="mb-3">
                {{ form.user_name.label(class="form-label") }}
                {{ form.user_name(class="form-control", placeholder="例: 山田太郎") }}
                <small class="form-text text-muted">使用者名（任意）</small>
            </div>
            <div class="mb-3">
                {{ form.purpose.label(class="form-label") }}
                {{ form.purpose(class="form-control", placeholder="例: 試作品A") }}
                <small class="form-text text-muted">使用目的（任意）</small>
            </div>
            <div class="mb-3">
                {{ form.scheduled_date.label(class="form-label") }}
                {{ form.scheduled_date(class="form-control", type="date") }}
                <small class="form-text text-muted">{% if action == 'use' %}使用予定日{% else %}補充予定日{% endif %}を入力（この日を過ぎると実行を促されます）</small>
            </div>
            {{ form.submit(class="btn btn-primary") }}
        </form>
        <a href="{{ url_for('index') }}" class="btn btn-secondary mt-3">在庫に戻る</a>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
